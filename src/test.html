<!DOCTYPE html >
<html >
  <head>
    <title>Get track example</title>
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
  </head>
  <body>
    <h1>Get track example</h1>
    <audio id="audio1" controls  >
      <source src="http://mattcrouch.net/experiments/music-sync/song.mp3">
      <track id="entrack" label="English subtitles" kind="chapters" src="track.vtt" srclang="en" default>
    </audio>
    <p>
    <button id="mybutton">Show tracks</button>
    </p>
    
   <div id="output"></div>
    <script>
      
		$(function(){
        console.log(localStorage.getItem('dropbox-auth:default:BkDBsEdfsagzMd3vUhhkgFiwag'))
    
			  $('audio').trigger("play"); //Start playing the audio
				var audio = document.querySelector("audio");
				var track = document.querySelector('track'); 
				var output = document.querySelector('#output');

        track.addEventListener('load',function() {
            var c = audio.textTracks[0].cues;
            for (var i=0; i<c.length; i++) {
              var s = document.createElement("p");
              s.innerHTML = c[i].text;
              s.setAttribute('data-start',c[i].startTime);
              s.addEventListener("click",seek);
              output.appendChild(s);
            }
        });

				// audio.textTracks[0].oncuechange = function (){
				// 	$("#output").html("");
				//  	if(this.activeCues !== null) {
			 	// 		for(var i=0;i<this.activeCues.length;i++) {
				//  			if(this.activeCues[i] !== undefined) {
				//  				$("#output").append(this.activeCues[i].text+"<br>");
				//  			}
			 	// 		}
				//  	}
				// }

        function seek(e) {
          audio.currentTime = this.getAttribute('data-start');
          if(audio.paused){ audio.play(); }
        };
		
	})
   </script>
  </body>
</html>